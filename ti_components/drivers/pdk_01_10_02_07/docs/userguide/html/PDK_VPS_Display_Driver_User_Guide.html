<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>PDK/PDK VPS Display Driver User Guide - Texas Instruments Wiki</title>
<meta name="generator" content="MediaWiki 1.25.1" />
<link rel="shortcut icon" href="favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://processors.wiki.ti.com/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="PDK_VPS_Display_Driver_User_Guide.html" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="http://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="load.php@debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor%257Cmediawiki.skinning.interface%257Cmediawiki.ui.button%257Cskins.vector.styles&amp;only=styles&amp;skin=vector&amp;%252A.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="load.php@debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;%252A.css" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: davincid_wikidb:resourceloader:filter:minify-css:7:70500b672b667d946e900b286b62c126 */</style>
<script src="load.php@debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;%252A"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"PDK/PDK_VPS_Display_Driver_User_Guide","wgTitle":"PDK/PDK VPS Display Driver User Guide","wgCurRevisionId":231101,"wgRevisionId":231101,"wgArticleId":45033,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Software \u0026 Tools"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"PDK/PDK_VPS_Display_Driver_User_Guide","wgRelevantArticleId":45033,"wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"publish":false},"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":false,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: davincid_wikidb:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/Vector/csshover.min.htc")}</style><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-PDK_PDK_VPS_Display_Driver_User_Guide skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

							<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p><br />
<span style="color:#ff0000"><b>Please note as of Wednesday, August 15th, 2018 this wiki has been set to read only. If you are a TI Employee and require Edit ability please contact x0211426 from the company directory.</b></span>
</p></div></div>
						<div class="mw-indicators">
</div>
			<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">PDK/PDK VPS Display Driver User Guide</span></h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From Texas Instruments Wiki</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="PDK_VPS_Display_Driver_User_Guide.html#mw-head">navigation</a>, 					<a href="PDK_VPS_Display_Driver_User_Guide.html#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="hf-nsheader"><script language = "Javascript">
var tiContentGroup;
var tiwikicat = (typeof(mw.config.values.wgCategories[0]) === "undefined"? "":mw.config.values.wgCategories[0]);
tiContentGroup = "/DSP/wiki/Ext/" +tiwikicat;
var tiPageName;
tiPageName = 'wiki/PDK/PDK_VPS_Display_Driver_User_Guide';
</script></div><div class="hf-header"></div><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="PDK_VPS_Display_Driver_User_Guide.html#Display_Drivers"><span class="tocnumber">1</span> <span class="toctext"><b>Display Drivers</b></span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="PDK_VPS_Display_Driver_User_Guide.html#Introduction"><span class="tocnumber">1.1</span> <span class="toctext"><b>Introduction</b></span></a></li>
<li class="toclevel-2 tocsection-3"><a href="PDK_VPS_Display_Driver_User_Guide.html#Sample_Application_Flow"><span class="tocnumber">1.2</span> <span class="toctext"><b>Sample Application Flow</b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="PDK_VPS_Display_Driver_User_Guide.html#Display_Controller_Driver"><span class="tocnumber">2</span> <span class="toctext"><b>Display Controller Driver</b></span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="PDK_VPS_Display_Driver_User_Guide.html#Introduction_2"><span class="tocnumber">2.1</span> <span class="toctext"><b>Introduction</b></span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="PDK_VPS_Display_Driver_User_Guide.html#Features_Supported"><span class="tocnumber">2.1.1</span> <span class="toctext"><b>Features Supported</b></span></a></li>
<li class="toclevel-3 tocsection-7"><a href="PDK_VPS_Display_Driver_User_Guide.html#Features_Not_Supported"><span class="tocnumber">2.1.2</span> <span class="toctext"><b>Features Not Supported</b></span></a></li>
<li class="toclevel-3 tocsection-8"><a href="PDK_VPS_Display_Driver_User_Guide.html#Hardware_Overview"><span class="tocnumber">2.1.3</span> <span class="toctext"><b>Hardware Overview</b></span></a>
<ul>
<li class="toclevel-4 tocsection-9"><a href="PDK_VPS_Display_Driver_User_Guide.html#Overview_-_TDA2xx.2FTDA2Px.2FTDA2Ex"><span class="tocnumber">2.1.3.1</span> <span class="toctext">Overview - TDA2xx/TDA2Px/TDA2Ex</span></a></li>
<li class="toclevel-4 tocsection-10"><a href="PDK_VPS_Display_Driver_User_Guide.html#Overview_-_TDA3xx"><span class="tocnumber">2.1.3.2</span> <span class="toctext">Overview - TDA3xx</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-11"><a href="PDK_VPS_Display_Driver_User_Guide.html#Software_Application_Interfaces"><span class="tocnumber">2.2</span> <span class="toctext"><b>Software Application Interfaces</b></span></a></li>
<li class="toclevel-2 tocsection-12"><a href="PDK_VPS_Display_Driver_User_Guide.html#System_Init_Phase"><span class="tocnumber">2.3</span> <span class="toctext"><b>System Init Phase</b></span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="PDK_VPS_Display_Driver_User_Guide.html#FVID2_Init"><span class="tocnumber">2.3.1</span> <span class="toctext"><b>FVID2 Init</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-14"><a href="PDK_VPS_Display_Driver_User_Guide.html#Create_Phase"><span class="tocnumber">2.4</span> <span class="toctext"><b>Create Phase</b></span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="PDK_VPS_Display_Driver_User_Guide.html#FVID2_Create"><span class="tocnumber">2.4.1</span> <span class="toctext"><b>FVID2 Create</b></span></a></li>
<li class="toclevel-3 tocsection-16"><a href="PDK_VPS_Display_Driver_User_Guide.html#FVID2_Control_-_Set_Config"><span class="tocnumber">2.4.2</span> <span class="toctext"><b>FVID2 Control - Set Config</b></span></a></li>
<li class="toclevel-3 tocsection-17"><a href="PDK_VPS_Display_Driver_User_Guide.html#FVID2_Control_-_Clear_Config"><span class="tocnumber">2.4.3</span> <span class="toctext"><b>FVID2 Control - Clear Config</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-18"><a href="PDK_VPS_Display_Driver_User_Guide.html#Delete_Phase"><span class="tocnumber">2.5</span> <span class="toctext"><b>Delete Phase</b></span></a>
<ul>
<li class="toclevel-3 tocsection-19"><a href="PDK_VPS_Display_Driver_User_Guide.html#FVID2_Delete"><span class="tocnumber">2.5.1</span> <span class="toctext"><b>FVID2 Delete</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-20"><a href="PDK_VPS_Display_Driver_User_Guide.html#System_De-Init_Phase"><span class="tocnumber">2.6</span> <span class="toctext"><b>System De-Init Phase</b></span></a>
<ul>
<li class="toclevel-3 tocsection-21"><a href="PDK_VPS_Display_Driver_User_Guide.html#FVID2_de-Init"><span class="tocnumber">2.6.1</span> <span class="toctext"><b>FVID2 de-Init</b></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-22"><a href="PDK_VPS_Display_Driver_User_Guide.html#Display_Driver"><span class="tocnumber">3</span> <span class="toctext"><b>Display Driver</b></span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="PDK_VPS_Display_Driver_User_Guide.html#Introduction_3"><span class="tocnumber">3.1</span> <span class="toctext"><b>Introduction</b></span></a></li>
<li class="toclevel-2 tocsection-24"><a href="PDK_VPS_Display_Driver_User_Guide.html#Software_Application_Interfaces_2"><span class="tocnumber">3.2</span> <span class="toctext"><b>Software Application Interfaces</b></span></a></li>
<li class="toclevel-2 tocsection-25"><a href="PDK_VPS_Display_Driver_User_Guide.html#System_Init_Phase_2"><span class="tocnumber">3.3</span> <span class="toctext"><b>System Init Phase</b></span></a>
<ul>
<li class="toclevel-3 tocsection-26"><a href="PDK_VPS_Display_Driver_User_Guide.html#FVID2_Init_2"><span class="tocnumber">3.3.1</span> <span class="toctext"><b>FVID2 Init</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-27"><a href="PDK_VPS_Display_Driver_User_Guide.html#Create_Phase_2"><span class="tocnumber">3.4</span> <span class="toctext"><b>Create Phase</b></span></a>
<ul>
<li class="toclevel-3 tocsection-28"><a href="PDK_VPS_Display_Driver_User_Guide.html#FVID2_Create_2"><span class="tocnumber">3.4.1</span> <span class="toctext"><b>FVID2 Create</b></span></a></li>
<li class="toclevel-3 tocsection-29"><a href="PDK_VPS_Display_Driver_User_Guide.html#FVID2_control"><span class="tocnumber">3.4.2</span> <span class="toctext"><b>FVID2_control</b></span></a></li>
<li class="toclevel-3 tocsection-30"><a href="PDK_VPS_Display_Driver_User_Guide.html#FVID2_Control_-_Set_Dss_params"><span class="tocnumber">3.4.3</span> <span class="toctext"><b>FVID2 Control - Set Dss params</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-31"><a href="PDK_VPS_Display_Driver_User_Guide.html#Run_Phase"><span class="tocnumber">3.5</span> <span class="toctext"><b>Run Phase</b></span></a>
<ul>
<li class="toclevel-3 tocsection-32"><a href="PDK_VPS_Display_Driver_User_Guide.html#Start_and_stop"><span class="tocnumber">3.5.1</span> <span class="toctext"><b>Start and stop</b></span></a></li>
<li class="toclevel-3 tocsection-33"><a href="PDK_VPS_Display_Driver_User_Guide.html#FVID2_Start"><span class="tocnumber">3.5.2</span> <span class="toctext"><b>FVID2 Start</b></span></a></li>
<li class="toclevel-3 tocsection-34"><a href="PDK_VPS_Display_Driver_User_Guide.html#FVID2_Stop"><span class="tocnumber">3.5.3</span> <span class="toctext"><b>FVID2 Stop</b></span></a></li>
<li class="toclevel-3 tocsection-35"><a href="PDK_VPS_Display_Driver_User_Guide.html#Queue_and_De-queue"><span class="tocnumber">3.5.4</span> <span class="toctext"><b>Queue and De-queue</b></span></a></li>
<li class="toclevel-3 tocsection-36"><a href="PDK_VPS_Display_Driver_User_Guide.html#FVID2_Queue"><span class="tocnumber">3.5.5</span> <span class="toctext"><b>FVID2 Queue</b></span></a></li>
<li class="toclevel-3 tocsection-37"><a href="PDK_VPS_Display_Driver_User_Guide.html#FVID2_Dequeue"><span class="tocnumber">3.5.6</span> <span class="toctext"><b>FVID2 Dequeue</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-38"><a href="PDK_VPS_Display_Driver_User_Guide.html#Delete_Phase_2"><span class="tocnumber">3.6</span> <span class="toctext"><b>Delete Phase</b></span></a>
<ul>
<li class="toclevel-3 tocsection-39"><a href="PDK_VPS_Display_Driver_User_Guide.html#FVID2_Delete_2"><span class="tocnumber">3.6.1</span> <span class="toctext"><b>FVID2 Delete</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-40"><a href="PDK_VPS_Display_Driver_User_Guide.html#System_De-Init_Phase_2"><span class="tocnumber">3.7</span> <span class="toctext"><b>System De-Init Phase</b></span></a>
<ul>
<li class="toclevel-3 tocsection-41"><a href="PDK_VPS_Display_Driver_User_Guide.html#FVID2_de-Init_2"><span class="tocnumber">3.7.1</span> <span class="toctext"><b>FVID2 de-Init</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-42"><a href="PDK_VPS_Display_Driver_User_Guide.html#Sample_Application"><span class="tocnumber">3.8</span> <span class="toctext"><b>Sample Application</b></span></a>
<ul>
<li class="toclevel-3 tocsection-43"><a href="PDK_VPS_Display_Driver_User_Guide.html#Dss_Display"><span class="tocnumber">3.8.1</span> <span class="toctext"><b>Dss Display</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-44"><a href="PDK_VPS_Display_Driver_User_Guide.html#DSS_Bypass_Mode"><span class="tocnumber">3.9</span> <span class="toctext"><b>DSS Bypass Mode</b></span></a></li>
<li class="toclevel-2 tocsection-45"><a href="PDK_VPS_Display_Driver_User_Guide.html#DSS_Region_Based_Writeback"><span class="tocnumber">3.10</span> <span class="toctext"><b>DSS Region Based Writeback</b></span></a>
<ul>
<li class="toclevel-3 tocsection-46"><a href="PDK_VPS_Display_Driver_User_Guide.html#Limitations_of_Region_Based_Writeback"><span class="tocnumber">3.10.1</span> <span class="toctext"><b>Limitations of Region Based Writeback</b></span></a></li>
<li class="toclevel-3 tocsection-47"><a href="PDK_VPS_Display_Driver_User_Guide.html#Care_abouts_by_application"><span class="tocnumber">3.10.2</span> <span class="toctext"><b>Care abouts by application</b></span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Display_Drivers"><b>Display Drivers</b></span></h1>
<h2><span class="mw-headline" id="Introduction"><b>Introduction</b></span></h2>
<p>Display drivers takes the video buffer from the application and displays the video on the video encoder (VENC) at specified frame rate and resolution. 
</p><p>Display driver follows the FVID2 interface for the applications: 
</p>
<ul><li>Supports only one handle per instance. This means that a specific driver could be opened only once. </li>
<li>Supports queuing mechanism. Application may queue multiple buffers with the driver and the driver displays the buffers one after the another sequentially in order the buffers are queued. </li>
<li>Multiple buffer submission per queue/dequeue is not supported. Supports only one request per queue/dequeue operation. In order to queue/dequeue multiple buffers, the application has to call queue/dequeue multiple times. </li>
<li>Queue and Dequeue FVID2 calls for all the display drivers are non blocking.</li>
<li>Display driver calls the application call back function on displaying the application buffer. Application could dequeue the buffers by explicitly calling dequeue function after the callback. </li>
<li>Once the display operation is started, the display driver always retains the last buffer and displays the same buffer continuously till the application gives a new buffer to display. </li>
<li>Any dequeue call to get back the last buffer when display is in progress will return error. Application should stop display operation before it could dequeue the last buffer from the driver. </li>
<li>When operating in interlaced mode, the display driver always takes both the field in a queue/dequeue call.</li>
<li>Before the display operation is started, the application has to queue a minimum set of buffers. This operation is called priming. </li>
<li>The minimum of number buffers required could defer from driver to driver. Generally this is equal to 1 buffer and the recommended value is equal to 3 buffers. Refer the driver specific documentation for the exact value.</li></ul>
<h2><span class="mw-headline" id="Sample_Application_Flow"><b>Sample Application Flow</b></span></h2>
<p>Following diagrams show the typical application flows for the display driver: 
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:477px;"><a href="http://processors.wiki.ti.com/index.php/File:DisplayFlowChartVayu.png" class="image"><img alt="" src="DisplayFlowChartVayu.png" width="475" height="380" class="thumbimage" /></a>  <div class="thumbcaption">Sample Application Flow</div></div></div></div><br />
<h1><span class="mw-headline" id="Display_Controller_Driver"><b>Display Controller Driver</b></span></h1>
<h2><span class="mw-headline" id="Introduction_2"><b>Introduction</b></span></h2>
<p>This chapter describes the hardware overview, application software interfaces for Display Controller driver. The features and limitations of current driver implementation are listed in subsequent sections. 
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(52, 128, 23);">
<p><b>Important</b><br /> The features supported or NOT supported in any release of the driver may vary from one HDVPSS driver release to another. See respective release notes for exact release specific details. 
</p>
</div> 
<h3><span class="mw-headline" id="Features_Supported"><b>Features Supported</b></span></h3>
<ul><li>Connecting pipelines, Overlay Managers(LCD1,LCD2,LCD3,TV),display ports(DPI1,DPI2,DPI3) modules statically and dynamically (but not at run time, i.e. after display is started)</li>
<li>All VENCs(LCD1,LCD2,LCD3) support upto 720p60, 1080p30, 1080i60 and 1080p60 mode </li>
<li>Supports FVID2 interface</li></ul>
<h3><span class="mw-headline" id="Features_Not_Supported"><b>Features Not Supported</b></span></h3>
<ul><li> Run time changing of Overlay manager parameters once it has started</li></ul>
<h3><span class="mw-headline" id="Hardware_Overview"><b>Hardware Overview</b></span></h3>
<p>Below figures shows the complete DSS Hardware. The circled part in the figure shows the modules which are controlled by display controller.
</p>
<h4><span class="mw-headline" id="Overview_-_TDA2xx.2FTDA2Px.2FTDA2Ex">Overview - TDA2xx/TDA2Px/TDA2Ex</span></h4>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:802px;"><a href="http://processors.wiki.ti.com/index.php/File:Dctrl_Dss_Vayu.jpg" class="image"><img alt="" src="Dctrl_Dss_Vayu.jpg" width="800" height="508" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="http://processors.wiki.ti.com/index.php/File:Dctrl_Dss_Vayu.jpg" class="internal" title="Enlarge"></a></div>Display Controller - TDA2SEDx</div></div></div></div>
<p>As shown in the figure, display controller driver controls configuration of paths i.e connnections of pipelines(VID1,VID2,VId3,GFX), Overlay managers(LCD1, LCD2,LCD3) and Display ports(DPI1,DPi2,DPI3). It also configures the timing of 
overlay managers. 
</p><p>It provides APIs to the application to configure these paths and to set the different frame rates and resolutions in the VENC. 
</p><p>The display controller will provide necessary information to the display driver about the resolution and frame rate that it has to operate. This is abstracted from the application.
</p>
<h4><span class="mw-headline" id="Overview_-_TDA3xx">Overview - TDA3xx</span></h4>
<p>Figure shows a block diagram with the DSS module within the device. 
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:882px;"><a href="http://processors.wiki.ti.com/index.php/File:DSS_overview_Tda3xx.jpg" class="image"><img alt="DSS overview Tda3xx.jpg" src="DSS_overview_Tda3xx.jpg" width="880" height="567" class="thumbimage" /></a>  <div class="thumbcaption"></div></div></div></div>
<p>The supported display interfaces are:
</p>
<ul><li>One parallel CMOS output, which can be used for MIPI® DPI 2.0, or BT-656 or BT-1120. </li>
<li>One TV output, which is connected to the internal Video Encoder module (VENC). The VENC drives a single video digital-to-analog converter (SD_DAC) supporting composite video mode.</li></ul>
<h2><span class="mw-headline" id="Software_Application_Interfaces"><b>Software Application Interfaces</b></span></h2>
<p>Display controller driver is not the streaming driver. Its used to control the specific part of the display controller as shown in above figure.
The driver operation can be partitioned into the below phases:
</p>
<ul><li>System Init Phase: Here the driver sub-system is initialized</li>
<li>Create Phase: Here the driver handle is created or instantiated</li>
<li>Run Phase: NA</li>
<li>Delete Phase: Here the driver handle or instance is deallocated</li>
<li>System De-init Phase: Here the driver sub-system is de-initialized</li></ul>
<p>The subsequent sections describe each phase in detail.
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(74, 67, 68);"><b>Note</b><br /> 
<p>Details of the structure, enumerations and #defines mentioned in the section can be found in PDK API guide
</p>
</div>
<h2><span class="mw-headline" id="System_Init_Phase"><b>System Init Phase</b></span></h2>
<p>The  display driver  sub-system  initialization  happens  as  part  of
overall HDVPSS system init. This API must be the the first API call before making any other FVID2 calls. 
Below section lists all the APIs which are part of the System Init phase. 
</p>
<h4><span class="mw-headline" id="FVID2_Init"><b>FVID2 Init</b></span></h4>
<pre>Int32 FVID2_init(Ptr args);</pre>
<p><b>args</b> - <code>NULL</code> currently not used.
</p>
<h2><span class="mw-headline" id="Create_Phase"><b>Create Phase</b></span></h2>
<p>In this phase user application opens or creates a driver instance. Any number of instances can be created for the display controller. Each instance works on the same central hardware block show above.  Concurrency issues between the different handles is taken care by the display controller driver. User can pass number of parameters to the drivers during create phase like configuration of the path, settings of the venc etc, either through the create parameters or through the control commands.
</p>
<h4><span class="mw-headline" id="FVID2_Create"><b>FVID2 Create</b></span></h4>
<p>This API is used to open the display controller driver. This is a blocking call and it returns the handle which is to be used in subsequent call to this driver. 
</p>
<pre>FVID2_Handle FVID2_create(UInt32 drvId,
                          UInt32 instanceId,
                          Ptr createArgs,
                          Ptr createStatusArgs,
                          const FVID2_CbParams *cbParams);
</pre> 
<p><b>drvId</b> - <code>FVID2_VPS_DCTRL_DRV</code> Display Controller Driver ID. Use this ID to open display controller driver. Details can be found in UserGuide
</p><p><b>instanceId</b> - <code>VPS_DCTRL_INST_0</code> Instance 0 of the display controller.
</p><p><b>createArgs</b> - Pointer to <code>Vps_DcCreateConfig</code> structure containing valid create params. This parameter can be NULL.
</p><p><b>createStatusArgs</b> - Pointer to <code>UInt32</code> return value where the driver returns the actual return code for create function. This parameter should not be NULL.
</p><p><b>cbParams</b> - Since there is no callback from the display controller, this parameters should be set to NULL.
</p><p><br />
</p>
<h4><span class="mw-headline" id="FVID2_Control_-_Set_Config"><b>FVID2 Control - Set Config</b></span></h4>
<p>This is used to issue a control command to the driver. <code>IOCTL_VPS_DCTRL_SET_CONFIG</code> ioctl is used to set the entire display configuration in one shot. This ioctl takes pointer to the structure <code>Vps_DctrlConfig</code>. This structure takes  list of edges connecting nodes and configures display paths. It first validates these paths and then configures VPS for the display paths. It configures all display controller modules. 
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(52, 128, 23);">
<p><b>Important</b><br /> This API should not be called after the display operation is started. 
</p>
</div> <pre>Int32 FVID2_control(FVID2_Handle handle,
                    UInt32 cmd,
                    Ptr cmdArgs,
                    Ptr cmdStatusArgs);
</pre> 
<p><b>handle</b> - Driver handle returned by create function call. This parameter should not be NULL. 
</p><p><b>cmd</b> - <code>IOCTL_VPS_DCTRL_SET_CONFIG
</code> ioctl. 
</p><p><b>cmdArgs</b> - Pointer to <code>Vps_DctrlConfig</code> structure containing Display Controller configuration. This parameter should not be NULL. 
</p><p><b>cmdStatusArgs</b> - Not used currently. This parameter should be set to NULL.
</p>
<h4><span class="mw-headline" id="FVID2_Control_-_Clear_Config"><b>FVID2 Control - Clear Config</b></span></h4>
<p>This is used to issue a control command to the driver. <code>IOCTL_VPS_DCTRL_CLEAR_CONFIG</code> ioctl is used to clear the entire display configuration in one shot. This ioctl takes pointer to the structure <code>Vps_DctrlConfig</code>. This structure takes  list of edges connecting nodes and disables path between these nodes. It does not validate the edge list. It simply disables edge connecting nodes. For the vencs, it checks for the validity and then disables the VENC of there are no errors. 
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(52, 128, 23);">
<p><b>Important</b><br /> This API should not be called after the display operation is started. 
</p>
</div> <pre>Int32 FVID2_control(FVID2_Handle handle,
		    UInt32 cmd,
		    Ptr cmdArgs,
		    Ptr cmdStatusArgs);
</pre> 
<p><b>handle</b> - Driver handle returned by create function call. This parameter should not be NULL. 
</p><p><b>cmd</b> - <code>IOCTL_VPS_DCTRL_CLEAR_CONFIG
</code> ioctl. 
</p><p><b>cmdArgs</b> - Pointer to <code>Vps_DctrlConfig</code> structure containing Display Controller configuration. This parameter should not be NULL. 
</p><p><b>cmdStatusArgs</b> - Not used currently. This parameter should be set to NULL.
</p>
<h2><span class="mw-headline" id="Delete_Phase"><b>Delete Phase</b></span></h2>
<p>In this phase FVID2 delete API is called to close the driver instance. Remember to clear the configuration before closing the driver instance.
</p>
<h4><span class="mw-headline" id="FVID2_Delete"><b>FVID2 Delete</b></span></h4>
<p>This API is used to close the display controller driver. This is a blocking call and returns after closing the handle. 
</p>
<pre>Int32 FVID2_delete(FVID2_Handle handle, Ptr deleteArgs);
</pre> 
<p><b>handle</b> - Driver handle returned by create function call. This parameter should not be NULL. 
</p><p><b>deleteArgs</b> - Not used currently. This parameter should be set to NULL. 
</p>
<h2><span class="mw-headline" id="System_De-Init_Phase"><b>System De-Init Phase</b></span></h2>
<h4><span class="mw-headline" id="FVID2_de-Init"><b>FVID2 de-Init</b></span></h4>
<p>Display controller is de-initialized as a part of this phase. Here all resources acquired during system initialization are freed. Make sure all driver instances deleted before calling this API. Display sub-system de-init happens as part of overall FVID2 system de-init. Typically this is done during system shutdown. 
</p>
<pre>Int32 FVID2_deInit(Ptr args);</pre>
<p><b>args</b> - Not used
</p>
<h1><span class="mw-headline" id="Display_Driver"><b>Display Driver</b></span></h1>
<h2><span class="mw-headline" id="Introduction_3"><b>Introduction</b></span></h2>
<p>This chapter describes the hardware overview, application software interfaces, typical application flow and sample application usage for display driver involving bypass paths and secondary path. 
</p><p><br />
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(52, 128, 23);">
<b>Important</b><br /> </div> 
<h2><span class="mw-headline" id="Software_Application_Interfaces_2"><b>Software Application Interfaces</b></span></h2>
<p>The driver operation can be partitioned into the below phases:
</p>
<ul><li>System Init Phase: Here the driver sub-system is initialized</li>
<li>Create Phase: Here the driver handle is created or instantiated</li>
<li>Run Phase: Here the driver is used to capture, process and release frames continuously</li>
<li>Delete Phase: Here the driver handle or instance is deallocated</li>
<li>System De-init Phase: Here the driver sub-system is de-initialized</li></ul>
<p>The subsequent sections describe each phase in detail.
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(74, 67, 68);"><b>Note</b><br /> 
<p>Details of the structure, enumerations and #defines mentioned in the section can be found in PDK API guide
</p>
</div>
<h2><span class="mw-headline" id="System_Init_Phase_2"><b>System Init Phase</b></span></h2>
<p>The  display driver  sub-system  initialization  happens  as  part  of
overall HDVPSS system init. This API must be the the first API call before making any other FVID2 calls. 
Below section lists all the APIs which are part of the System Init phase. 
</p>
<h4><span class="mw-headline" id="FVID2_Init_2"><b>FVID2 Init</b></span></h4>
<pre>Int32 FVID2_init(Ptr args);</pre>
<p><b>args</b> - <code>NULL</code> currently not used. 
</p>
<h2><span class="mw-headline" id="Create_Phase_2"><b>Create Phase</b></span></h2>
<p>In this phase user application opens or creates a driver instance. Up to <code>VPS_DISPLAY_INST_MAX</code> (defined in vps_display.h ) driver instances can be opened by a user. Each driver instance is associated with one of the pipeline(video/ Graphics) paths as listed in detail in PDK API guide.
</p><p>User can pass number of parameters to the drivers during create phase like setting the format, setting the multi window configuration etc.  These all configuration can be either done through standard FVID2 APIs or driver exported control commands or through driver create parameters itself.
</p>
<h4><span class="mw-headline" id="FVID2_Create_2"><b>FVID2 Create</b></span></h4>
<p>This API is used to open the driver. This is a blocking call and it returns the handle which is to be used in subsequent call to this driver. This cannot be called from ISR context. 
</p>
<pre>
FVID2_Handle FVID2_create(UInt32 drvId,
                          UInt32 instanceId,
			  Ptr createArgs,
			  Ptr createStatusArgs,
			  const FVID2_CbParams *cbParams);
</pre> 
<p><b>drvId</b> - <code>FVID2_VPS_DISP_DRV</code> to open the display driver.
</p><p><b>instanceId</b> - <code>VPS_DISP_INST_DSS_VID1</code> macro to open Video 1 path display driver or pass <code>VPS_DISP_INST_DSS_VID2</code> macro to open Video 2 path display driver or <code>VPS_DISP_INST_DSS_VID3</code> macro to open Video 3 path display driver or <code>VPS_DISP_INST_DSS_GFX1</code> macro to open Graphics path display driver.
</p><p><b>createArgs</b> - Pointer to <code>Vps_DispCreateParams</code> structure containing valid create params. This parameter should not be NULL.
</p><p><b>createStatusArgs</b> - Pointer to <code>Vps_DispCreateStatus</code> structure containing the return value of create function and other driver information. This parameter could be NULL if application don't want the create status information.
</p><p><b>cbParams</b> - Pointer to <code>FVID2_CbParams</code> structure containing FVID2 callback parameters. This parameter should not be NULL. But the callback function pointers inside this structure is optional.
</p>
<h4><span class="mw-headline" id="FVID2_control"><b>FVID2_control</b></span></h4>
<p>This API is used to expose the different control commands to the application depending upon the specific driver.
</p>
<pre>
Int32 FVID2_control(FVID2_Handle handle,
                    UInt32 cmd,
                    Ptr cmdArgs,
                    Ptr cmdStatusArgs);
</pre>
<h4><span class="mw-headline" id="FVID2_Control_-_Set_Dss_params"><b>FVID2 Control - Set Dss params</b></span></h4>
<p><code>IOCTL_VPS_DISP_SET_DSS_PARAMS</code> ioctl is used to Set the all parameters related to DSS. This is a blocking call.
</p>
<pre>
Int32 FVID2_control(FVID2_Handle handle,
                    UInt32 cmd,
                    Ptr cmdArgs,
                    Ptr cmdStatusArgs);
</pre> 
<p><b>handle</b> - Driver handle returned by create function call. This parameter should not be NULL. 
</p><p><b>cmd</b> - <code>IOCTL_VPS_DISP_SET_DSS_PARAMS</code> ioctl. 
</p><p><b>cmdArgs</b> - Pointer to <code>Vps_DispDssParams</code>. 
</p><p><b>cmdStatusArgs</b> - This Parameter can be NULL.
</p>
<h2><span class="mw-headline" id="Run_Phase"><b>Run Phase</b></span></h2>
<p>This phase is used to start or stop the already started display driver.  This is also used to exchange the displayed buffers and the fresh buffers between the driver and applications.
</p>
<h4><span class="mw-headline" id="Start_and_stop"><b>Start and stop</b></span></h4>
<h4><span class="mw-headline" id="FVID2_Start"><b>FVID2 Start</b></span></h4>
<p>This API is used by the application to start the display operation. This is a blocking call and returns after starting the display operation. Before starting the display operation, the application has to prime at least 1 buffer with the driver using queue API. Typically 3 buffers are used: 1 used by application and 2 buffers are queued with the driver at any given time. This cannot be called from ISR context. 
</p>
<pre>Int32 FVID2_start(FVID2_Handle handle, Ptr cmdArgs);
</pre> 
<p><b>handle</b> - Driver handle returned by create function call. This parameter should not be NULL. 
</p><p><b>cmdArgs</b> - Not used currently. This parameter should be set to NULL. 
</p>
<h4><span class="mw-headline" id="FVID2_Stop"><b>FVID2 Stop</b></span></h4>
<p>This API is used by the application to stop the display operation. This is a blocking call and returns after stopping the display operation. This cannot be called from ISR context. 
</p>
<pre>Int32 FVID2_stop(FVID2_Handle handle, Ptr cmdArgs);
</pre> 
<p><b>handle</b> - Driver handle returned by create function call. This parameter should not be NULL. 
</p><p><b>cmdArgs</b> - Not used currently. This parameter should be set to NULL.
</p>
<h4><span class="mw-headline" id="Queue_and_De-queue"><b>Queue and De-queue</b></span></h4>
<h4><span class="mw-headline" id="FVID2_Queue"><b>FVID2 Queue</b></span></h4>
<p>This API is used to submit a video buffer to the driver for display operation. This is a non-blocking call and could be called from task or ISR context. Once the buffer is queued the application loses ownership of the buffer and is not suppose to modify or use the buffer. 
</p>
<pre>
Int32 FVID2_queue(FVID2_Handle handle,
                  FVID2_FrameList *frameList,
                  UInt32 streamId);
</pre> 
<p><b>handle</b> - Driver handle returned by create function call. This parameter should not be NULL. 
</p><p><b>frameList</b> - Pointer to <code>FVID2_FrameList</code> structure containing the pointer to the FVID2 frames. This parameter should not be NULL. In normal display operation, the number of frames passed using this call is one.
</p><p><b>streamId</b> - Not used currently. This parameter should be set to 0.
</p>
<h4><span class="mw-headline" id="FVID2_Dequeue"><b>FVID2 Dequeue</b></span></h4>
<p>This API is used by the application to get ownership of a displayed video buffer from the display driver. This is a non-blocking call and could be called from task or ISR context. 
</p>
<pre>
Int32 FVID2_dequeue(FVID2_Handle handle,
                    FVID2_FrameList *frameList,
                    UInt32 streamId,
                    UInt32 timeout);</pre> 
<p><b>handle</b> - Driver handle returned by create function call. This parameter should not be NULL. 
</p><p><b>frameList</b> - Pointer to <code>FVID2_FrameList</code> structure where the driver will copy the displayed FVID2 frames. This parameter should not be NULL. In normal display operation, the number of frames returned using this call is one. When multiple window configuration is set, this frame list returns the frames of all the multiple window buffers of the current layout. 
</p><p><b>streamId</b> - Not used currently. This parameter should be set to 0. 
</p><p><b>timeout</b> - Not used currently as only non-blocking queue/dequeue operation is supported. This parameter should be set to FVID2_TIMEOUT_NONE.
</p>
<h2><span class="mw-headline" id="Delete_Phase_2"><b>Delete Phase</b></span></h2>
<p>In this phase FVID2 delete API is called to close the driver instance. All the resources are freed. Make sure display is stopped using FVID2_stop() before deleting a display instance. Once the driver is instance is closed it can be opened again with new configuration.
</p>
<h4><span class="mw-headline" id="FVID2_Delete_2"><b>FVID2 Delete</b></span></h4>
<p>This API is used to close the display driver. This is a blocking call and returns after closing the handle. This cannot be called from ISR context. 
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(74, 67, 68);">
<p><b>Note</b><br /> Closing the driver will implicitly stop the display if stop IOCTl is not called by the application. This will also delete all the created layouts. 
</p>
</div> <pre>Int32 FVID2_delete(FVID2_Handle handle, Ptr deleteArgs);
</pre> 
<p><b>handle</b> - Driver handle returned by create function call. This parameter should not be NULL. 
</p><p><b>deleteArgs</b> - Not used currently. This parameter should be set to NULL.  
</p>
<h2><span class="mw-headline" id="System_De-Init_Phase_2"><b>System De-Init Phase</b></span></h2>
<h4><span class="mw-headline" id="FVID2_de-Init_2"><b>FVID2 de-Init</b></span></h4>
<p>In this phase display driver is de-initialized. Here all resources acquired during system initialization are free'ed. Make sure all driver instances deleted before calling this API. Display sub-system de-init happens as part of overall FVID2 system de-init. Typically this is done during system shutdown. 
</p>
<pre>Int32 FVID2_deInit(Ptr args);</pre>
<p><b>args</b> - Not used
</p>
<h2><span class="mw-headline" id="Sample_Application"><b>Sample Application</b></span></h2>
<h3><span class="mw-headline" id="Dss_Display"><b>Dss Display</b></span></h3>
<p>This example illustrates the display streaming feature of video and graphics Path displaying buffers on LCD and TV outputs. <br />
</p>
<ul><li>Load <i>vps_examples_displayDss_ipu1_0_release.xem4</i> executable file found at <i>$(rel_folder)\packages\ti\binary\vps_examples_displayDss\bin\$platform\exampleName_core_release.xem4</i> to DSS M4 debug session </li>
<li>Run the application and it will halt for the user to provide the Option to run.</li>
<li>Then it will halt for the user to load the input frames. </li>
<li>Using loadRaw command in script console of CCS, load 4 frames of 800 x 480 YUYV interleaved data to the printed location. (Ignore "syntax error" if it appears during loading)</li></ul>
<pre>loadRaw(&lt;Address Location&gt;, 0, &quot; &lt; File Path &gt; &quot;, 32, false);</pre> 
<ul><li>Enter 1 on the console when application stops at after loading of the frames is completed.</li></ul>
<p><code>Input a numeric key and press enter after loading...</code> 
</p>
<ul><li>This will display the Buffers one after the other on LCD/TV.</li>
<li>Application will stop after displaying <code>TOTAL_LOOP_COUNT</code> frames</li>
<li>Configuration Options: To change the number of frames to display, change the macro <code>TOTAL_LOOP_COUNT</code> to any desired value greater than 2.  </li>
<li>Configuration Options: Change <code>BUFFER_WIDTH</code> and <code>BUFFER_HEIGHT</code> macro according to the input buffer dimension. The application will automatically change the window sizes according to the buffer size and pitch.</li>
<li>Option 3 and 4 has features of blending and transparency color keying. In option 3 gfx layer is blended with video layer.In option 4 two video planes(side by side) are blended with graphics layer on top of it.</li>
<li>Option 5 showcases use of all four pipelines(three video and one graphics), first video pipeline output is of full screen, the other two pipeline outputs are of small size window. These three video pipelines are blended with full size graphics layer.</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id="DSS_Bypass_Mode"><b>DSS Bypass Mode</b></span></h2>
<p>DSS (Display sub system) in Tda2xx/Tda2px/Tda2ex/Tda3xx can be configured to operate in bypass/Transparent mode. It means that there will be no processing
on the input data. It will be sent out on the DPI output as is. <br />
</p><p>This mode can be used to transfer data from DMA to other modules via DPI port.
</p><p>The IOCTL call should be made with following parameters.
</p><p><code>IOCTL_VPS_DISP_SET_DSS_PARAMS</code>
</p>
<ul><li>dispDssPrms.inFmt.width = Should be same as Overlay width.</li>
<li>dispDssPrms.inFmt.height = Should be same as Overlay Height.</li>
<li>dispDssPrms.inFmt.pitch[0] = (dispDssPrms.inFmt.width * 3)</li>
<li>dispDssPrms.inFmt.dataFormat = FVID2_DF_BGR24_888</li>
<li>dispDssPrms.inFmt.scanFormat = FVID2_SF_PROGRESSIVE</li>
<li>dispDssPrms.tarWidth = dispDssPrms.inFmt.width;</li>
<li>dispDssPrms.tarHeight = dispDssPrms.inFmt.height;</li>
<li>dispDssPrms.posX      = 0;</li>
<li>dispDssPrms.posY      = 0;</li>
<li>dispDssPrms.memType   = VPS_VPDMA_MT_NONTILEDMEM;</li>
<li>dispDssPrms.vidCfg-&gt;pipeCfg.repliEnable = FALSE;</li>
<li>dispDssPrms.vidCfg-&gt;pipeCfg.scEnable = FALSE;</li>
<li>dispDssPrms.vidCfg-&gt;pipeCfg.cscFullRngEnable = VPS_DSS_DISPC_CSC_FULL;</li>
<li>dispDssPrms.vidCfg-&gt;pipeCfg.chromaSampling = 0;</li></ul>
<ul><li>dispDssPrms.vidCfg-&gt;pipeCfg.vc1Cfg-&gt;enable = FALSE;</li>
<li>dispDssPrms.vidCfg-&gt;pipeCfg.vc1Cfg-&gt;rangeY = 0;</li>
<li>dispDssPrms.vidCfg-&gt;pipeCfg.vc1Cfg-&gt;rangeUV = 0;</li></ul>
<ul><li>dispDssPrms.vidCfg-&gt;pipeCfg.advDmaCfg = NULL;</li>
<li>dispDssPrms.vidCfg-&gt;pipeCfg.gfxCfg = NULL;</li></ul>
<p><code>IOCTL_VPS_DCTRL_SET_CONFIG</code> in case of Display Controller driver
</p>
<ul><li>mInfo = &amp;dctrlCfg-&gt;vencInfo.modeInfo[0U].mInfo;</li>
<li>mInfo-&gt;standard = FVID2_STD_CUSTOM;</li>
<li>mInfo-&gt;width      = overlay Width;  /*Same width should be set for dispDssPrms.inFmt.width */</li>
<li>mInfo-&gt;height     = overlay height; /*Same height should be set for dispDssPrms.inFmt.height */</li>
<li>mInfo-&gt;scanFormat = FVID2_SF_PROGRESSIVE;</li></ul>
<p>The timing like hsynclength, vsync length and porches should be as per the width and height.
</p><p>In <code>IOCTL_VPS_DCTRL_SET_OVLY_PARAMS IOCTL</code>.
</p><p>Both alpha blending and color key should be disabled.
</p>
<ul><li>panelCfg-&gt;alphaBlenderEnable = 0;</li>
<li>panelCfg-&gt;colorKeyEnable     = 0;</li></ul>
<h2><span class="mw-headline" id="DSS_Region_Based_Writeback"><b>DSS Region Based Writeback</b></span></h2>
<p>Region based writeback feature is available in TDA3xx.
The driver does the region based writeback on TDA3xx when the <code>Vps_CaptDssWbParams.inFmt.width</code> (This should be overlay width) and <code>Vps_CaptDssWbParams.inCropCfg.cropWidth</code> are not same or  <code>Vps_CaptDssWbParams.inFmt.height</code> (This should be overlay height) and <code>Vps_CaptDssWbParams.inCropCfg.cropHeight</code> are not same.
By specifying the above values only part of the overlay can be written back. The position of the region to be written back can be specified by <code>Vps_CaptDssWbParams.inCropCfg.cropStartX</code> and <code>Vps_CaptDssWbParams.inCropCfg.cropStartY</code>
</p>
<h3><span class="mw-headline" id="Limitations_of_Region_Based_Writeback"><b>Limitations of Region Based Writeback</b></span></h3>
<p>There are some of the hardware constraints listed below while using the region based writeback.
The DSS writeback registers are shadowed just like the other pipes, but shadow to work copy happens at the WB Sync Event (At the beginning of active display) and RB Events (At the end ot the writeback region), they are as shown in below Image
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:1061px;"><a href="http://processors.wiki.ti.com/index.php/File:DssRegionBasedWbEvents.PNG" class="image"><img alt="" src="DssRegionBasedWbEvents.PNG" width="1059" height="376" class="thumbimage" /></a>  <div class="thumbcaption">DSS Region based Writeback Events</div></div></div></div><br />
<p>The register DISPC_WB_ATTRIBUTES2-&gt;REGION_BASED determines whether the writeback is region based or full frame. Further DSS Hw expects Region based bit to be set to 1 in the work register only between WB Sync Event and RB Event. And it should be set to 0 after RB Event to Next WB Sync Event.
<br />
This puts the constraint on software to write 0 to region based bit in WB Sync ISR and write 1 in RB Event ISR in every frame (This is handled by the driver internally), and these ISRs should be serviced before the next event happens.
Below are the issues could happen if the ISRs are delayed
</p>
<ul><li>DSS Hw might write extra full frame data insted of only the region.</li>
<li>DSS Hw might skip writeback for few frames.</li></ul>
<p>Driver will handle these scenarios internally and return the buffers to application only when the proper frame is captured.
</p>
<h3><span class="mw-headline" id="Care_abouts_by_application"><b>Care abouts by application</b></span></h3>
<ul><li>Allocate the buffer for full frame size but use the pixel data corresponding to only the region width and height.</li>
<li>The writeback framerate as seen from application might be less than the display frame rate.</li>
<li>the ISR priorities should be adjusted to make sure the DSS ISRs (WB Sync and RB Event) are serviced before next event from hardware happens so that frame drop is less. Time to service WB Sync ISR is from start of active video to last line of the region to be captured and time to service RB Event ISR is from last line of region to be captured to next Vsync. Based on worst case ISR latency and the time taken for each line of display the safe region to capture should be derived.</li></ul>

<!-- 
NewPP limit report
CPU time usage: 0.096 seconds
Real time usage: 0.230 seconds
Preprocessor visited node count: 346/1000000
Preprocessor generated node count: 546/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->

<!-- Saved in parser cache with key davincid_wikidb:pcache:idhash:45033-0!*!*!!en!5!* and timestamp 20190103051127 and revision id 231101
 -->
<div class="hf-footer"></div><div class="hf-nsfooter"><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="http://processors.wiki.ti.com/index.php/File:E2e.jpg" class="image"><img alt="E2e.jpg" src="E2e.jpg" width="305" height="63" /></a>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external free" href="http://e2e.ti.com">http://e2e.ti.com</a>. Please post only comments about the article <b>PDK/PDK VPS Display Driver User Guide</b> here.</i>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"> <a href="http://processors.wiki.ti.com/index.php/File:Hyperlink_blue.png" class="image"><img alt="Hyperlink blue.png" src="Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li> <a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li> <a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li> <a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li> <a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br />
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br />
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<p><!-- HitBox Sub accounts Code START -->
<script language="JavaScript" src="http://focus.ti.com/js/shared/metrics/metrics-min.js?version=1" type="text/javascript"></script>
<!-- HitBox Sub accounts Code END -->
</p>
<div id="tiPrivacy"></div>
</div></div>									<div class="printfooter">
						Retrieved from "<a dir="ltr" href="http://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_Display_Driver_User_Guide&amp;oldid=231101">http://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_Display_Driver_User_Guide&amp;oldid=231101</a>"					</div>
													<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="http://processors.wiki.ti.com/index.php/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="http://processors.wiki.ti.com/index.php/Category:Software_%26_Tools" title="Category:Software &amp; Tools">Software &amp; Tools</a></li></ul></div></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="http://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=PDK%2FPDK+VPS+Display+Driver+User+Guide" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="http://processors.wiki.ti.com/index.php/Special:RequestAccount" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="PDK_VPS_Display_Driver_User_Guide.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
															<li  id="ca-talk" class="new"><span><a href="http://processors.wiki.ti.com/index.php?title=Talk:PDK/PDK_VPS_Display_Driver_User_Guide&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label"><span>Variants</span><a href="PDK_VPS_Display_Driver_User_Guide.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="PDK_VPS_Display_Driver_User_Guide.html" >Read</a></span></li>
															<li id="ca-viewsource"><span><a href="http://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_Display_Driver_User_Guide&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="http://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_Display_Driver_User_Guide&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="PDK_VPS_Display_Driver_User_Guide.html#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="http://processors.wiki.ti.com/index.php" id="searchform">
														<div id="simpleSearch">
															<input type="search" name="search" placeholder="Search" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />								</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="http://processors.wiki.ti.com/index.php/Main_Page"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
			<h3 id='p-navigation-label'>Navigation</h3>

			<div class="body">
									<ul>
													<li id="n-mainpage"><a href="http://processors.wiki.ti.com/index.php/Main_Page" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
													<li id="n-All-pages"><a href="http://processors.wiki.ti.com/index.php/Special:AllPages">All pages</a></li>
													<li id="n-All-categories"><a href="http://processors.wiki.ti.com/index.php/Special:Categories">All categories</a></li>
													<li id="n-recentchanges"><a href="http://processors.wiki.ti.com/index.php/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
													<li id="n-randompage"><a href="http://processors.wiki.ti.com/index.php/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
													<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-coll-print_export' aria-labelledby='p-coll-print_export-label'>
			<h3 id='p-coll-print_export-label'>Print/export</h3>

			<div class="body">
									<ul>
													<li id="coll-create_a_book"><a href="http://processors.wiki.ti.com/index.php?title=Special:Book&amp;bookcmd=book_creator&amp;referer=PDK%2FPDK+VPS+Display+Driver+User+Guide">Create a book</a></li>
													<li id="coll-download-as-rl"><a href="http://processors.wiki.ti.com/index.php?title=Special:Book&amp;bookcmd=render_article&amp;arttitle=PDK%2FPDK+VPS+Display+Driver+User+Guide&amp;oldid=231101&amp;writer=rl">Download as PDF</a></li>
													<li id="t-print"><a href="http://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_Display_Driver_User_Guide&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Toolbox</h3>

			<div class="body">
									<ul>
													<li id="t-whatlinkshere"><a href="http://processors.wiki.ti.com/index.php/Special:WhatLinksHere/PDK/PDK_VPS_Display_Driver_User_Guide" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
													<li id="t-recentchangeslinked"><a href="http://processors.wiki.ti.com/index.php/Special:RecentChangesLinked/PDK/PDK_VPS_Display_Driver_User_Guide" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
													<li id="t-specialpages"><a href="http://processors.wiki.ti.com/index.php/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
													<li id="t-permalink"><a href="http://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_Display_Driver_User_Guide&amp;oldid=231101" title="Permanent link to this revision of the page">Permanent link</a></li>
													<li id="t-info"><a href="http://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_Display_Driver_User_Guide&amp;action=info" title="More information about this page">Page information</a></li>
											</ul>
							</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 13 October 2017, at 07:09.</li>
											<li id="footer-info-viewcount">This page has been accessed 3,968 times.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="http://processors.wiki.ti.com/index.php/Project:Privacy_policy" title="Project:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="http://processors.wiki.ti.com/index.php/Project:About" title="Project:About">About Texas Instruments Wiki</a></li>
											<li id="footer-places-disclaimer"><a href="http://processors.wiki.ti.com/index.php/Project:General_disclaimer" title="Project:General disclaimer">Disclaimers</a></li>
											<li id="footer-places-termsofservice"><a href="http://processors.wiki.ti.com/index.php/Project:Terms_of_Service" title="Project:Terms of Service">Terms of Use</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
															<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31" /></a>
													</li>
											<li id="footer-poweredbyico">
															<a href="http://www.mediawiki.org/"><img src="poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
													</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"http://processors.wiki.ti.com/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=vector\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":790});
}</script>
	</body>
</html>
