<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>VLIB: VLIB_disparity_SAD16</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="tilogo.gif"></a></td>
  <td bgcolor="red"><img src="titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>VLIB_disparity_SAD16</h1><hr><a name="_details"></a><h2>Detailed Description</h2>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_l_i_b__disparity___s_a_d16.html#gff9957fc4d47a87677df541ba5f1f5db">VLIB_disparity_SAD16</a> (const uint16_t *restrict pLeft, const uint16_t *restrict pRight, uint32_t *restrict pCost, uint32_t *restrict pMinCost, int8_t *restrict pDisparity, int32_t displacement, int32_t width, int32_t pitch, int32_t windowSize)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="gff9957fc4d47a87677df541ba5f1f5db"></a><!-- doxytag: member="c66/VLIB_disparity_SAD16.h::VLIB_disparity_SAD16" ref="gff9957fc4d47a87677df541ba5f1f5db" args="(const uint16_t *restrict pLeft, const uint16_t *restrict pRight, uint32_t *restrict pCost, uint32_t *restrict pMinCost, int8_t *restrict pDisparity, int32_t displacement, int32_t width, int32_t pitch, int32_t windowSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t VLIB_disparity_SAD16           </td>
          <td>(</td>
          <td class="paramtype">const uint16_t *restrict&nbsp;</td>
          <td class="paramname"> <em>pLeft</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16_t *restrict&nbsp;</td>
          <td class="paramname"> <em>pRight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *restrict&nbsp;</td>
          <td class="paramname"> <em>pCost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *restrict&nbsp;</td>
          <td class="paramname"> <em>pMinCost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t *restrict&nbsp;</td>
          <td class="paramname"> <em>pDisparity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>displacement</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>pitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>windowSize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b>Description</b></dt><dd>This function calculates the disparity at each position in a row of an 16-bit stereo image pair. This function is optimized reusing the previous calculations. For the first row, calculations cannot be reused; thus, <a class="el" href="group___v_l_i_b__disparity___s_a_d__first_row16.html">VLIB_disparity_SAD_firstRow16</a> should be used to calculate the disparities in the first row.</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>*pLeft</em>&nbsp;</td><td>Pointer to a pixel in left image (UQ15.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>*pRight</em>&nbsp;</td><td>Pointer to a pixel in right image matching specified displacement. (UQ15.0) </td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>*pCost</em>&nbsp;</td><td>Cost corresponding to current displacement (UQ32.0) </td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>*pMinCost</em>&nbsp;</td><td>Minimum cost across all displacements (UQ32.0) </td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>*pDisparity</em>&nbsp;</td><td>Displacement having the minimum cost (SQ8.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>displacement</em>&nbsp;</td><td>Current displacement (in pixels) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>width</em>&nbsp;</td><td>Output width of disparity row (in pixels) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pitch</em>&nbsp;</td><td>Pitch of the input images (in pixels) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>windowSize</em>&nbsp;</td><td>Size of the block used for computing SAD (in pixels) (eg. a value of 5 represents a 5x5 window block size)</td></tr>
  </table>
</dl>
<dl class="user" compact><dt><b>Assumptions</b></dt><dd><ul>
<li>This function should not be called on the first row of an image. Instead, <a class="el" href="group___v_l_i_b__disparity___s_a_d__first_row16.html">VLIB_disparity_SAD_firstRow16</a> should be called on the first row, and this function should be called on subsequent rows in order from top to bottom.</li><li>This function should be called multiple times for each row of the image: once for each displacement to search. Each time, the <em>pRight</em> pointer and <em>displacement</em> variable should be modified to search for disparities at each displacement required. Each invocation of the function updatest the pCost, pMinCost, and pDisparity buffers.</li><li>Before calling this function the first time for each row, the following buffers should be set accordingly:<ul>
<li>pMinCost should be filled with 0x7FFFFFFF's (max value of a signed 32 bit variable).</li><li>pDisparity should be filled with 0's.</li></ul>
</li><li>The pCost buffer should never be altered in between subsequent calls to this function throughout the entire frame. It is used to store inter-row state information.</li><li>windowSize should be an odd value.</li><li>pitch should be &gt;= (width + (number of disparities to search - 1) + (windowSize - 1)). This is required in order to ensure that disparities are not calculated based on wrap-around from other lines in the input images.</li><li>The following list minimum buffer requirements: pMinCost = width elements rounded up to the nearest multiple of 4 plus 1 pCost = width elements rounded up to the nearest multiple of 4 plus 1, times the number of disparities to search. pDisparity = width elements rounded up to the nearest multiple of 4 plus 1, times the number of lines to output</li><li>The pointer values for pLeft and pRight should account for the windowSize. For example, if windowSize=5, then the pointer values should be adjusted at least windowSize/2 (5/2=2) pixels from the left border, and windowSize/2 (5/2=2) lines from the top or bottom of the image ... otherwise, the algorithm would access out of bound memory.</li><li>Due to an optimization using the _sub2() instruction, which works on signed 16 bit inputs, the most significant bit of the input (bit 15) should be 0. This means the effective dynamic range of the input data is 15 bits, not 16. If a full 16 bits is required, please contact TI to make us aware of the priority of this use case.</li></ul>
</dd></dl>
<dl class="user" compact><dt><b>Benchmarks:</b></dt><dd>See VLIB_Test_Report.html for cycle and memory information. </dd></dl>

</div>
</div><p>
<hr size="1"><small>
Copyright  2018, Texas Instruments Incorporated</small>
</body>
</html>
