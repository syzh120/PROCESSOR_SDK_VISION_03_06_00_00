<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>VLIB: VLIB_matchTemplate</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="tilogo.gif"></a></td>
  <td bgcolor="red"><img src="titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>VLIB_matchTemplate</h1><hr><a name="_details"></a><h2>Detailed Description</h2>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_l_i_b__match_template.html#gd0471188c8799523612d52240d09dd2c">VLIB_matchTemplate</a> (uint8_t img[restrict], int32_t imgWidth, int32_t imgHeight, int32_t imgPitch, int16_t tempImg[restrict], int32_t tempImgWidth, int32_t tempImgHeight, int32_t tempImgPitch, VLIB_F32 scaledTempImgVar, uint8_t xDirJump, uint8_t yDirJump, int32_t method, int32_t outScorePitch, VLIB_F32 outScore[restrict], uint8_t scratch[restrict])</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="gd0471188c8799523612d52240d09dd2c"></a><!-- doxytag: member="c66/VLIB_matchTemplate.h::VLIB_matchTemplate" ref="gd0471188c8799523612d52240d09dd2c" args="(uint8_t img[restrict], int32_t imgWidth, int32_t imgHeight, int32_t imgPitch, int16_t tempImg[restrict], int32_t tempImgWidth, int32_t tempImgHeight, int32_t tempImgPitch, VLIB_F32 scaledTempImgVar, uint8_t xDirJump, uint8_t yDirJump, int32_t method, int32_t outScorePitch, VLIB_F32 outScore[restrict], uint8_t scratch[restrict])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t VLIB_matchTemplate           </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>img</em>[restrict], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>imgWidth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>imgHeight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>imgPitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&nbsp;</td>
          <td class="paramname"> <em>tempImg</em>[restrict], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>tempImgWidth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>tempImgHeight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>tempImgPitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VLIB_F32&nbsp;</td>
          <td class="paramname"> <em>scaledTempImgVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>xDirJump</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>yDirJump</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>outScorePitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VLIB_F32&nbsp;</td>
          <td class="paramname"> <em>outScore</em>[restrict], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>scratch</em>[restrict]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b>Description:</b></dt><dd>This routine accepts an 8-bit grayscale input image of size orgImgWidth by orgImgHeight with a stride of orgImgPitch along with template image of size tempImgWidth by tempImgHeight with a stride tempImgPitch and calculates normalized cross correlation of template image with original image at all possible locations.</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>img[]</em>&nbsp;</td><td>original input image data pointer (UQ8.0 ) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>imgWidth</em>&nbsp;</td><td>original input image width (SQ31.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>imgHeight</em>&nbsp;</td><td>original input image height (SQ31.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>imgPitch</em>&nbsp;</td><td>original input image pitch (SQ31.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>tempImg</em>&nbsp;</td><td>template image pointer (SQ13.2) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>tempImgWidth</em>&nbsp;</td><td>template image width (SQ31.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>tempImgHeight</em>&nbsp;</td><td>template image height (SQ31.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>tempImgPitch</em>&nbsp;</td><td>template image pitch (SQ31.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>scaledTempImgVar</em>&nbsp;</td><td>template image variance (FLOAT) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>xDirJump</em>&nbsp;</td><td>jump in x direction while template search in <code>img</code> (UQ8.0 ) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>yDirJump</em>&nbsp;</td><td>jump in y direction while template search in <code>img</code> (UQ8.0 ) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>method</em>&nbsp;</td><td>method use in template matching, must be 0 for now (SQ31.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>outScorePitch</em>&nbsp;</td><td>pitch of <code>outScore</code> buffer (elements, not bytes) (SQ31.0) </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>outScore</em>&nbsp;</td><td>data pointer for variance value for each block (FLOAT) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>scratch[]</em>&nbsp;</td><td>data pointer for scratch buffer (UQ8.0 )</td></tr>
  </table>
</dl>
<dl class="user" compact><dt><b>Assumptions:</b></dt><dd><ul>
<li>Input image data is of 8 bits.</li><li>All buffers should not overlap (should be non-aliased)</li><li>Scaled template image variance, 1.0f/sqrt(Sum((tempImg[i]-tempImgMean)^2)))</li><li><code>outScore</code> buffer size should be at least <code>outScorePitch</code> * outScoreHeight * 4 bytes, where:<ul>
<li>outScoreWidth is(<code>imgWidth</code> - (<code>tempImgWidth</code> - 1))</li><li>outScoreHeight is (<code>imgHeight</code> - (<code>tempImgHeight</code> - 1))</li><li><code>outScorePitch</code> parameter should be greater than or equal to outScoreWidth</li></ul>
</li><li><code>scratch</code> buffer size should be at least 20*(outScoreWidth * outScoreHeight) + 40 bytes. Where outScoreWidth and outScoreHeight are given above.</li><li>Supported range of <code>tempImgWidth</code> is [4 .. 128]</li><li>Supported range of <code>tempImgHeight</code> is [4 .. 128]</li><li>When <code>xDirJump</code> is 'n' then every 'n' th output is valid in <code>outScore</code>, similarly for <code>yDirJump</code> </li></ul>
</dd></dl>
<dl class="user" compact><dt><b>Implementation Notes:</b></dt><dd><ul>
<li>Specific optimimzation is done when <code>tempImgWidth</code> is equal to <code>tempImgPitch</code> </li><li>Specific optimimzation is done <code>tempImgWidth</code> * <code>tempImgHeight</code> is less than 2048</li><li>Specific optimimzation is done when <code>tempImgWidth</code> is 24 and 32</li><li>Specific optimimzation is done if <code>img</code> base address is word aligned and <code>tempImg</code> is double word aligned.</li><li>Specific optimimzation is done if <code>tempImgPitch</code> and <code>orgImgPitch</code> is multiple of 4</li></ul>
</dd></dl>
<dl class="user" compact><dt><b>Benchmarks:</b></dt><dd>See VLIB_Test_Report.html for cycle and memory information. </dd></dl>

</div>
</div><p>
<hr size="1"><small>
Copyright  2018, Texas Instruments Incorporated</small>
</body>
</html>
