<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>VLIB: SAD Based Disparity</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="tilogo.gif"></a></td>
  <td bgcolor="red"><img src="titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="index.html">VLIB Function Reference</a></div>
<h1><a class="anchor" name="sad_based_disparity">SAD Based Disparity</a></h1><h2><a class="anchor" name="intro30">
Introduction and Use Cases</a></h2>
Disparity gives a measure of depth information from stereo images. Here we provide an algorithm to compute disparity from rectified stereo images using Sum of absolute difference (SAD) based block matching.<h2><a class="anchor" name="specification30">
Specification</a></h2>
<h3><a class="anchor" name="function30">
Function</a></h3>
These functions calculates the disparity at each position in a row of a stereo image pair. This function is optimized reusing the previous calculations. For the first row calculations cannot be reused; thus, <a class="el" href="group___v_l_i_b__disparity___s_a_d__first_row8.html">VLIB_disparity_SAD_firstRow8</a> or <a class="el" href="group___v_l_i_b__disparity___s_a_d__first_row16.html">VLIB_disparity_SAD_firstRow16</a> should be used to calculate the disparities in the first row.<h3><a class="anchor" name="variants30">
Variants</a></h3>
This functionality is available in two variants:<ul>
<li>8-bit per pixel input images</li><li>16-bit per pixel input images</li></ul>
<h3><a class="anchor" name="input30">
Inputs</a></h3>
<div class="fragment"><pre class="fragment">

    Parameter          Description                                   8-bit       16-bit
    -------------------------------------------------------------------------------------
    *pLeft             Pointer to left image                        (UQ8.0)     (UQ15.0)
    *pRight            Pointer to right image                       (UQ8.0)     (UQ15.0)
    *pCost             Cost corresponding to current displacement   (UQ16.0)    (UQ32.0)
    *pMinCost          Minimum cost across all displacements        (UQ16.0)    (UQ32.0)
    *pScratch          Scratch Memory of size width                 (UQ16.0)    (UQ32.0)
    *pDisparity        Displacement having the minimum cost         (SQ7.0)     (SQ7.0)
     displacement      Current displacement                         (SQ31.0)    (SQ31.0)
     width             Width of the input images                    (UQ32.0)    (SQ31.0)
     pitch             Pitch of the input images                    (SQ31.0)    (SQ31.0)
     windowSize        Size of the block used for computing SAD     (SQ31.0)    (SQ31.0)
   </pre></div><h3><a class="anchor" name="outputs30">
Outputs</a></h3>
<div class="fragment"><pre class="fragment">
    Returns VLIB Error Status
</pre></div> <h3><a class="anchor" name="method30">
Method</a></h3>
Two images, the left and right images, are used as inputs to the algorithm. These images are assumed to be rectified so that the disparity search is only along the row. The parameter pCost buffer is used to hold the SAD cost function for all pixels in a row and for all permissible values of horizontal displacements. The algorithm computes the cost measure for a row and for a specified displacement. This function has to be looped over the range of disparity and then through all the rows. The function also updates the pMinCost buffer and stores the displacement which corresponds to the minimum cost in pDisparity buffer. This is the simplest method for disparity calculation. But the API gives out the cost measure at each pixel and each disparity which can be used for more complicated algorithms like dynamic programming,etc.<p>
<a class="el" href="group___v_l_i_b__disparity___s_a_d8.html">VLIB_disparity_SAD8</a> and <a class="el" href="group___v_l_i_b__disparity___s_a_d16.html">VLIB_disparity_SAD16</a> uses the pCost buffer corresponding to the previous row for calculations of the current row. Care has to be taken that pCost buffer is not cleared or reused for some other purpose. For the first row, we cannot reuse the calculations. Thus a separate API <a class="el" href="group___v_l_i_b__disparity___s_a_d__first_row8.html">VLIB_disparity_SAD_firstRow8</a> or <a class="el" href="group___v_l_i_b__disparity___s_a_d__first_row16.html">VLIB_disparity_SAD_firstRow16</a> is provided. It uses a scratch buffer pScratch of size width for internal calculations. This is required only for the first row disparity computation and can be freed after that.<h3><a class="anchor" name="apis30">
APIS</a></h3>
8-bit Input:<ul>
<li><a class="el" href="group___v_l_i_b__disparity___s_a_d__first_row8.html">VLIB_disparity_SAD_firstRow8</a></li><li><a class="el" href="group___v_l_i_b__disparity___s_a_d8.html">VLIB_disparity_SAD8</a></li></ul>
<p>
16-bit Input:<ul>
<li><a class="el" href="group___v_l_i_b__disparity___s_a_d__first_row16.html">VLIB_disparity_SAD_firstRow16</a></li><li><a class="el" href="group___v_l_i_b__disparity___s_a_d16.html">VLIB_disparity_SAD16</a></li></ul>
<h2><a class="anchor" name="references30">
References</a></h2>
<ol type=1>
<li><em>Computer Vision </em>, pages 371-409, by Linda G. Shapiro and George C. Stockman, Prentice-Hall, 2001 </li></ol>
<hr size="1"><small>
Copyright  2018, Texas Instruments Incorporated</small>
</body>
</html>
