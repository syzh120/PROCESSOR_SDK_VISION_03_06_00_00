<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>VLIB: Blob Analysis</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="tilogo.gif"></a></td>
  <td bgcolor="red"><img src="titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="index.html">VLIB Function Reference</a></div>
<h1><a class="anchor" name="blob_analysis">Blob Analysis</a></h1><h2><a class="anchor" name="intro49">
Introduction and Use Cases</a></h2>
Calculate the perimeter, area, minimal enclosed polygon, minimal enclosed rectangle, minimal enclosed circle of the specified blob.<h2><a class="anchor" name="specification49">
Specification</a></h2>
<h3><a class="anchor" name="function49">
Function</a></h3>
<ul>
<li>The primary function to create blob list is <a class="el" href="group___v_l_i_b__create_blob_list.html">VLIB_createBlobList</a>.</li><li>The primary function to create blob interval image is <a class="el" href="group___v_l_i_b__create_blob_interval_img.html">VLIB_createBlobIntervalImg</a>.</li><li>The primary function to calculate perimeter is <a class="el" href="group___v_l_i_b__calc_blob_perimeter.html">VLIB_calcBlobPerimeter</a>.</li><li>The primary function to calculate minimal enclosed polygon is <a class="el" href="group___v_l_i_b__calc_blob_min_enclosed_polygon.html">VLIB_calcBlobMinEnclosedPolygon</a>.</li><li>The primary function to calculate minimal enclosed rectangle is <a class="el" href="group___v_l_i_b__calc_blob_min_enclosed_rect.html">VLIB_calcBlobMinEnclosedRect</a>.</li><li>The primary function to calculate minimal enclosed circle is <a class="el" href="group___v_l_i_b__calc_blob_min_enclosed_circle.html">VLIB_calcBlobMinEnclosedCircle</a>.</li></ul>
<h3><a class="anchor" name="apis49">
APIS</a></h3>
<ul>
<li><a class="el" href="group___v_l_i_b__create_blob_list.html">VLIB_createBlobList</a></li><li><a class="el" href="group___v_l_i_b__create_blob_interval_img.html">VLIB_createBlobIntervalImg</a></li><li><a class="el" href="group___v_l_i_b__calc_blob_perimeter.html">VLIB_calcBlobPerimeter</a></li><li><a class="el" href="group___v_l_i_b__calc_blob_min_enclosed_polygon.html">VLIB_calcBlobMinEnclosedPolygon</a></li><li><a class="el" href="group___v_l_i_b__calc_blob_min_enclosed_rect.html">VLIB_calcBlobMinEnclosedRect</a></li><li><a class="el" href="group___v_l_i_b__calc_blob_min_enclosed_circle.html">VLIB_calcBlobMinEnclosedCircle</a></li></ul>
<p>
<div class="fragment"><pre class="fragment">
     The steps to perform blob analysis are:
             Functionality                                           | API
     ---------------------------------------------------------------------------------------------------------------------
     For the whole image                                             |
     [1] Connected component labeling                                | \ref VLIB_createConnectedComponentsList &amp; \ref VLIB_createCCMap8Bit
     [2] Create blob list by extracting the internal                 | \ref VLIB_createBlobList
         information of CCL                                          |
     [3] Allocate the scratch buffer. The buffer size depends        | malloc
         on the maximal blob size of the image. These parameters     |
         are counted during blob list creation                       |
     for each blob                                                   |
     {                                                               |
         [4] Create the interval image of the blob                   | \ref VLIB_createBlobIntervalImg
         [5] Calculate the perimeter of the blob                     | \ref VLIB_calcBlobPerimeter
         [6] Calculate the minimal enclosed polygon of the blob      | \ref VLIB_calcBlobMinEnclosedPolygon
         [7] Calculate the minimal enclosed rectangle of the blob    | \ref VLIB_calcBlobMinEnclosedRect
         [8] Calculate the minimal enclosed circle of the blob       | \ref VLIB_calcBlobMinEnclosedCircle
     }
     step [5],[6],[7],[8] are optional depends on the application
     The dependency between modules are:
         [2] depends on [1] for globlal interval image and the blob list (before blob list creation)
         [3] depends on [2] for maximal blob parameters
         [4] depends on [1,2,3] for globlal interval image, blob parameter and output buffer
         [5] depends on [1,4] for ccmap and blob interval image
         [6] depends on [3,4] for scratch buffer and blob interval image
         [7] depends on [6] for vertex point list of minimal enclosed polygon
         [8] depends on [6] for vertex point list of minimal enclosed polygon

    For example:
    [[[[[[[[[[The input image is]]]]]]]]]]]]
    row0 :
    row1 :         * *             *           *                         * * * * *                       * *           * * * * * * *
    row2 :       * * * *             *       *                           * * * * * *                   * * * *       *               *
    row3 :         * *                 *   *                             * * * * * * *               * * * * * *     *   * * * * *   *
    row4 :               * * *           *                               * * * * * * * *                 * *         *   *       *   *
    row5 :     * * * * * * * * * *       *       * * * * * * * * * * * * * * * * * * * * * * * *       * * * *       *   *       *   *
    row6 :   * * * * * * * * * * *       *       * * * * * * * * * * * * * * * * * * * * * * * *     * * * * * *     *   * * * * *   *
    row7 :     * * * * * * * * * *       *       * * * *                               * * * *     * * * * * * * *   *               *
    row8 :               * * * *       * * *       * *                                   * *           * * * *         * * * * * * *
    row9 :

    =============================================== Connected Component Labeling ==============================================================
    [[[[[[[[[[The blob list output from CC labeling]]]]]]]]]]]]
    For the above sample image, the blob list output from CC labeling is below.
    The parameters used for CC labeling algorithm are "8-connected component labeling" and "#define MINBLOBAREA 1"
      Blob_ID,  Area,  xmin,   xmax,   ymin,  ymax
         1,      8,      2,      5,      1,      3
         2,     13,     11,     17,      1,      8
         3,     86,     18,     41,      1,      8
         4,     36,     43,     50,      1,      8
         5,     26,     52,     60,      1,      8
         6,     14,     54,     58,      3,      6
         7,     38,      0,     10,      4,      8

    [[[[[[[[[[The ccmap output from CC labeling]]]]]]]]]]]]
    For the above sample image, the ccmap output from CC labeling is below. The blobs are identified by 1,3,4,5,6,7,8
    row0 :   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    row1 :   0 0 0 1 1 0 0 0 0 0 0 2 0 0 0 0 0 2 0 0 0 0 0 0 0 0 0 0 0 0 3 3 3 3 3 0 0 0 0 0 0 0 0 0 0 0 4 4 0 0 0 0 0 5 5 5 5 5 5 5 0 0 0 0
    row2 :   0 0 1 1 1 1 0 0 0 0 0 0 2 0 0 0 2 0 0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 0 0 3 0 0 0 0 0 0 0 0 0 4 4 4 4 0 0 0 5 0 0 0 0 0 0 0 5 0 0 0
    row3 :   0 0 0 1 1 0 0 0 0 0 0 0 0 2 0 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 0 0 0 3 0 0 0 0 0 0 0 4 4 4 4 4 4 0 0 5 0 6 6 6 6 6 0 5 0 0 0
    row4 :   0 0 0 0 0 0 7 7 7 0 0 0 0 0 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 0 0 0 0 3 0 0 0 0 0 0 0 0 4 4 0 0 0 0 5 0 6 0 0 0 6 0 5 0 0 0
    row5 :   0 7 7 7 7 7 0 0 0 7 7 0 0 0 2 0 0 0 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 0 0 0 4 4 4 4 0 0 0 5 0 6 0 0 0 6 0 5 0 0 0
    row6 :   7 7 7 7 0 7 7 7 7 7 7 0 0 0 2 0 0 0 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 0 0 4 4 4 4 4 4 0 0 5 0 6 6 6 6 6 0 5 0 0 0
    row7 :   0 7 7 7 7 7 0 0 0 7 7 0 0 0 2 0 0 0 3 3 3 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 3 3 3 0 0 4 4 4 4 4 4 4 4 0 5 0 0 0 0 0 0 0 5 0 0 0
    row8 :   0 0 0 0 0 0 7 7 7 7 0 0 0 2 2 2 0 0 0 3 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 3 0 0 0 0 0 4 4 4 4 0 0 0 0 5 5 5 5 5 5 5 0 0 0 0
    row9 :   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

    [[[[[[[[[[The global interval image which is internal result of CC labeling ]]]]]]]]]]]]
    syntax: [row index] -- {location,size,value}
    [  0] --
    [  6] -- (  3,  2,  0) ( 11,  1,  1) ( 17,  1,  1) ( 30,  5,  3) ( 46,  2,  4) ( 53,  7,  5)
    [  7] -- (  2,  4,  0) ( 12,  1,  1) ( 16,  1,  1) ( 30,  6,  3) ( 45,  4,  4) ( 52,  1,  5) ( 60,  1,  5)
    [  8] -- (  3,  2,  0) ( 13,  1,  1) ( 15,  1,  1) ( 30,  7,  3) ( 44,  6,  4) ( 52,  1,  5) ( 54,  5,  6) ( 60,  1,  5)
    [  8] -- (  6,  3,  7) ( 14,  1,  1) ( 30,  8,  3) ( 46,  2,  4) ( 52,  1,  5) ( 54,  1,  6) ( 58,  1,  6) ( 60,  1,  5)
    [  8] -- (  1, 10,  7) ( 14,  1,  1) ( 18, 24,  3) ( 45,  4,  4) ( 52,  1,  5) ( 54,  1,  6) ( 58,  1,  6) ( 60,  1,  5)
    [  7] -- (  0, 11,  7) ( 14,  1,  1) ( 18, 24,  3) ( 44,  6,  4) ( 52,  1,  5) ( 54,  5,  6) ( 60,  1,  5)
    [  7] -- (  1, 10,  7) ( 14,  1,  1) ( 18,  4,  3) ( 37,  4,  3) ( 43,  8,  4) ( 52,  1,  5) ( 60,  1,  5)
    [  6] -- (  6,  4,  7) ( 13,  3,  1) ( 19,  2,  3) ( 38,  2,  3) ( 45,  4,  4) ( 53,  7,  5)
    [  0] --

    =============================================== Blob analysis ==============================================================
    [[[[[[[[[[The created blob list after the first step of blob analysis ]]]]]]]]]]]]
      Blob_ID, area,   xmin,   xmax,   ymin,  ymax,  numIntervals, iiValue, ccmapColor
         1,      8,      2,      5,      1,      3,      3,          0,        1
         2,     13,     11,     17,      1,      8,     11,          1,        3
         3,     86,     18,     41,      1,      8,     10,          3,        4
         4,     36,     43,     50,      1,      8,      8,          4,        5
         5,     26,     52,     60,      1,      8,     14,          5,        6
         6,     14,     54,     58,      3,      6,      6,          6,        7
         7,     38,      0,     10,      4,      8,      5,          7,        8

</pre></div><h2><a class="anchor" name="performance49">
Performance</a></h2>
The cycle count to process a image depends on the number of blobs in a image and the size of blob. <div class="fragment"><pre class="fragment">
   Example benchmark(unit is ms):
   test case  num of blobs,  for createBlobList, make interval image, perimeter, polygon, minRectan, minCircle
      1          7 blobs,           0.01,                0.01,        0.00,       0.01,     0.04,     0.02
      2         47 blobs,           0.16,                0.16,        0.65,       0.26,     0.44,     0.21
      3         80 blobs,           0.13,                0.25,        0.26,       0.27,     0.80,     0.30
      4         41 blobs,           0.06,                0.06,        0.15,       0.11,     0.41,     0.18
      5          5 blobs,           0.09,                0.06,        0.36,       0.12,     0.07,     0.03
 </pre></div> <h2><a class="anchor" name="references491">
References</a></h2>
<ol type=1>
<li><em> no </em> </li></ol>
<hr size="1"><small>
Copyright  2018, Texas Instruments Incorporated</small>
</body>
</html>
