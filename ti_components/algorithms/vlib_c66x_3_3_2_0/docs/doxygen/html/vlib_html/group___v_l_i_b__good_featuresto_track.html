<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>VLIB: VLIB_goodFeaturestoTrack</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="tilogo.gif"></a></td>
  <td bgcolor="red"><img src="titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>VLIB_goodFeaturestoTrack</h1><hr><a name="_details"></a><h2>Detailed Description</h2>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___v_l_i_b__good_featuresto_track.html#g5dd9ffecd5fb86775106e56378f387a3">VLIB_goodFeaturestoTrack</a> (const uint16_t im[restrict], uint8_t out[restrict], int32_t width, int32_t height, int16_t thresh, uint8_t patch, uint8_t qualitypar, int16_t topNfeatures, uint8_t mindist, uint16_t outTemp[], int32_t *restrict good_points_number, int16_t pixIndex[restrict], uint16_t internalBuf[restrict], int32_t ind[restrict])</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g5dd9ffecd5fb86775106e56378f387a3"></a><!-- doxytag: member="c66/VLIB_goodFeaturestoTrack.h::VLIB_goodFeaturestoTrack" ref="g5dd9ffecd5fb86775106e56378f387a3" args="(const uint16_t im[restrict], uint8_t out[restrict], int32_t width, int32_t height, int16_t thresh, uint8_t patch, uint8_t qualitypar, int16_t topNfeatures, uint8_t mindist, uint16_t outTemp[], int32_t *restrict good_points_number, int16_t pixIndex[restrict], uint16_t internalBuf[restrict], int32_t ind[restrict])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VLIB_goodFeaturestoTrack           </td>
          <td>(</td>
          <td class="paramtype">const uint16_t&nbsp;</td>
          <td class="paramname"> <em>im</em>[restrict], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>out</em>[restrict], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&nbsp;</td>
          <td class="paramname"> <em>thresh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>patch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>qualitypar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&nbsp;</td>
          <td class="paramname"> <em>topNfeatures</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>mindist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>outTemp</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *restrict&nbsp;</td>
          <td class="paramname"> <em>good_points_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&nbsp;</td>
          <td class="paramname"> <em>pixIndex</em>[restrict], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>internalBuf</em>[restrict], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>ind</em>[restrict]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b>Description</b></dt><dd>This algorithm accepts an image array which contains scores of feature candidates, and produces an 8-bit binary mask (0 or 255) of the image based on a programmable quality threshold and number of desired features. </dd></dl>
<dl class="user" compact><dt><b></b></dt><dd>This function first runs a non-maximal suppression on the image using the programmable threshold (<code>thresh</code>) and filter width parameters (<code>patch</code>). It then prunes these results out using the <code>qualitypar</code> threshold. Then it sorts these results by ranking scores. If the number of results are still greater than the number of desired features (<code>topNfeatures</code>), then the results are further sorted by another round of a threshold-less nonmax suppression (spatial diversity) using the <code>mindist</code> parameter. The patch size in this round of pruning is defined by mindist*mindist. In other words, features which appear within the surrounding mindist*mindist pixels which have a lower score, are discarded. If spatial diversity prooves to prune too many features out of the list (features falls below topNfeatures), then spatial diversity is internally disabled, and the top ranking topNfeatures features are returned without considering spatial diversity.</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>im</em>&nbsp;</td><td>16-bit input image (UQ16.0) </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>out</em>&nbsp;</td><td>8-bit binary output image (0 or 255) (UQ8.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>width</em>&nbsp;</td><td>Width of the input image (SQ31.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>height</em>&nbsp;</td><td>Height of the input image (SQ31.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>thresh</em>&nbsp;</td><td>NONMAX-SUPR Threshold for pruning peaks (SQ15.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>patch</em>&nbsp;</td><td>NONMAX-SUPR Filter width (UQ8.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>qualitypar</em>&nbsp;</td><td>Quality threshold to keep stronger points (UQ8.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>topNfeatures</em>&nbsp;</td><td>Number of strongest ranking points to retain (SQ15.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>mindist</em>&nbsp;</td><td>Patch size used for spatial diversity of features patch size = mindist*mindist (UQ8.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>outTemp</em>&nbsp;</td><td>Auxiliary buffer for intermediate operations (UQ16.0) </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>*good_points_number</em>&nbsp;</td><td>Number of points resulting (SQ31.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pixIndex</em>&nbsp;</td><td>NONMAX-SUPR Pixel index buffer (SQ15.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>internalBuf</em>&nbsp;</td><td>NONMAX-SUPR Internal buffer (UQ16.0) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ind</em>&nbsp;</td><td>Index buffer (SQ31.0)</td></tr>
  </table>
</dl>
<dl class="user" compact><dt><b>Assumptions</b></dt><dd><ul>
<li>The only acceptable values for <code>patch</code> are 3, 5, and 7, representing non-maximum suppression filter masks sizes 3x3, 5x5, and 7x7, respectively.</li><li>The non-maximum suppression <code>pixIndex</code> buffer (<code>pixIndex</code>) size should be (2*w*h+2)*sizeof(uint16_t) bytes</li><li>The non-maximum suppression internal buffer (<code>internalBuf</code>) size should be at least ((2 * <code>patch</code>) + (<code>width</code> * <code>height</code>))*sizeof(uint16_t) bytes</li><li>The intermediate buffer (<code>outTemp</code>) size should be at least (w*h)*sizeof(uint16_t) bytes and initialized to 0s.</li><li>The index buffer (<code>ind</code>) size should be at least (w*h)*sizeof(int32_t) bytes</li><li>The output buffer (<code>out</code>) size should be at least w*h bytes and initialized to 0s.</li><li>The output buffer (<code>out</code>) will contain a value of 255 for each location containing the filtered feature.</li><li>The value returned in <code>good_points_number</code> will be equal to or less than topNfeatures. If less than topNfeatures, then the <code>qualitypar</code> may be too high to produce topNfeatures points. </li></ul>
</dd></dl>

</div>
</div><p>
<hr size="1"><small>
Copyright  2018, Texas Instruments Incorporated</small>
</body>
</html>
