<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>VLIB: Normal Flow</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<table width=100%>
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border=0 src="tilogo.gif"></a></td>
  <td bgcolor="red"><img src="titagline.gif"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="index.html">VLIB Function Reference</a></div>
<h1><a class="anchor" name="normal_flow">Normal Flow</a></h1><h2><a class="anchor" name="intro23">
Introduction and Use Cases</a></h2>
Normal flow computes, for every pixel in the image, motion vectors parallel to the gradient direction at each pixel. Normal flow vectors, averaged over an image region, can provide useful information regarding the direction and magnitude of motion. <h2><a class="anchor" name="specification23">
Specification</a></h2>
<h3><a class="anchor" name="function23">
Function</a></h3>
This function takes as input the x and y gradients, the gradient magnitude, and the pixel-wise image difference and computes the normal flow vectors in the x and y directions.<h3><a class="anchor" name="input21">
Inputs</a></h3>
<div class="fragment"><pre class="fragment">

    Parameter          Description
    -------------------------------------------------------------------------------------
    *imDiff            Image difference array                       (SQ15.0)
    *Emag              Array for magnitude                          (SQ15.0)
    *Ex                Array for X direction gradients              (SQ15.0)
    *Ey                Array for y direction gradients              (SQ15.0)
    *LUT               LUT array for integer division               (SQ0.15)
     T                 Threshold on gradient magnitude              (SQ15.0)
     numEls            Number of input pixels                       (SQ31.0)
    *normalFlowU       Normal flow U array                          (SQ8.7)
    *normalFlowV       Normal flow V array                          (SQ8.7)
   </pre></div><h3><a class="anchor" name="method23">
Method</a></h3>
This function considers a 7x7 patch centered about the feature coordinate. Bilinear sampling is used so that the tracked feature coordinates have sub-pixel accuracy. The number of iterations is typically between 6 and 10.<h3><a class="anchor" name="apis23">
APIS</a></h3>
<ul>
<li><a class="el" href="group___v_l_i_b__normal__16.html#g3a6da6a5ec81ab2588178f51c401311d">VLIB_normalFlow_16</a></li></ul>
<h3><a class="anchor" name="notes23">
Notes</a></h3>
<ul>
<li>The LUT (look-up table) array should hold values such that LUT[n] = X, where X is the value 1/n represented in SQ0.15 format.</li><li>The LUT array size should be at least equal to the largest expected value in the Emag array + 1.</li><li>The threshold, T, on gradient magnitude ensures that only those pixels with gradient magnitude greater than T will be processed. Normal flow values for pixels that do not pass the threshold will be 0.</li><li>Minimum number of pixels allowed is 20 (numPixels &gt;= 20)</li><li>Number of pixels to be processed should be a multiple of 4.</li><li>All arrays are double word aligned. </li></ul>
<hr size="1"><small>
Copyright  2018, Texas Instruments Incorporated</small>
</body>
</html>
